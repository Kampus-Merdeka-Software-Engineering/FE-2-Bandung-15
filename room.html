<!DOCTYPE html>
<html lang="en">
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery's Hotel</title>
    <link rel="stylesheet" href="css/styleroom.css" />
  </head>
  <body>
    <section id="book-now" style="padding-top: 100px; background: url(./asset/layanan2.png); background-repeat: no-repeat; background-size: 34%;background-position: left;">
                <div class="book-now">
                <button class="btn">Booking Here</button>
                </div>
                    <div class="ID-form-container">
                        <div class="ID-form">
                            <table cellpadding="5" style="border-collapse: collapse;"  class="content-table">
                                <thead>
                                    <tr><td colspan="2" style="text-align: center"><b>Book Now</b></td></tr>
                                </thead>
                                <tr>
                                  <td>
                                    <select class="button" id="prov1" onchange="loadKota(this.value, 'kot1')">
                                      <option value="" selected="" disabled="">-- Select Province --</option>
                                      <option value="jw">Jawa</option>
                                      <option value="sum">Sumatera</option>
                                      <option value="kal">Kalimantan</option>
                                    </select>
                                  </td>
                                  <td>
                                    <select class="button" id="prov2" onchange="loadKota(this.value, 'kot2')">
                                      <option value="" selected="" disabled="">-- Select Hotel --</option>
                                    </select>
                                  </td>
                                </tr>
                                <tr>
                                  <td>
                                    <select class="button" id="date1" type="date">
                                      <option value="" selected="" disabled="">-- Check In --</option>
                                    </select>
                                  </td>
                                  <td>
                                    <select class="button" id="date2">
                                      <option value="" selected="" disabled="">-- Check Out --</option>
                                    </select>
                                  </td>
                                </tr>
                                <tr>
         
                                </tr>
                                <tr>
    
                                </tr>
                                <thead>
                                    <tr><td colspan="2" style="text-align: center"><b>Order Details</b></td></tr>
                                </thead>
                                <td>Adult</td>
                                <td><input  class="button"  type="number" id="adult" min="0" step="1" value="1"></td>
                              </tr>
                              <tr>
                                <td>Children</td>
                                <td><input  class="button"  type="number" id="child" min="0" step="1" value="1"></td>
                              </tr>
                              <tr>
                                <tr>
                                  <td>Room</td>
                                  <td><input  class="button"  type="number" id="room" min="1" step="1" value="1"></td>
                                </tr>
                                <tr>
                                  <td>Type</td>
                                  <td>
                                    <select class="button" id="resepsionis">
                                      <option value="" selected="" disabled="">-- Type Room --</option>
                                      <option value="std">Standard Room</option>
                                      <option value="sup">Superior Room</option>
                                      <option value="del">Deluxe Room</option>
                                    </select>
                                  </td>
                                </tr>
                                <thead>
                                  <tr><td colspan="2" style="text-align: center"><b>Total Room Fee :</b></td></tr>
                                </thead>
                                <td>
                                  <select class="button" id="payment">
                                    <option value="" selected="" disabled="">-- Discount --</option>
                                    <option value="std">Haven't Discount</option>
                                    <option value="sup">5 %</option>
                                    <option value="del">10%</option>
                                  </select>
                                </td>
                                <td>
                                  <select class="button" id="payment">
                                    <option value="" selected="" disabled="">-- Payment Method --</option>
                                    <option value="std">Transfer Bank</option>
                                    <option value="sup">E-Wallet</option>
                                    <option value="del">Credit Card</option>
                                    <option value="del">Cash On Delivery</option>
                                  </select>
                                </td>
                                <thead>
                                  <tr><td colspan="2" style="text-align: center"><b>Total Payment :</b></td></tr>
                                </thead>
                                <tr>
                                  <td colspan="2"><button class="button" onclick="cekBooking()">Booking</button></td>
                                </tr>
                                <tr>
                                  <td colspan="2"><button class="button" onclick="cekBooking()"><a href="index.html"id="home-link" style="color: rgb(230, 27, 27);"><b>Cancel</b></a></button></td>
                                </tr>
                              </table>
                              <br>
                              <div id="hasil"></div>
                        </div>
                  </div>
            </section>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
            <script>
                // booking hotel
                async function bookHotel() {
                    // Mendapatkan nilai dari elemen formulir atau variabel lainnya
                    const name = document.getElementById("input-name").value;
                    const email = document.getElementById("input-email").value;
                    const checkInDate = document.getElementById("input-checkin-date").value;
                    const checkOutDate = document.getElementById("input-checkout-date").value;
                    const roomType = document.getElementById("input-room-type").value;
                    const numberOfAdults = document.getElementById("input-adults").value;
                    const numberOfChildren = document.getElementById("input-children").value;

                    // Data pemesanan yang akan dikirim ke server
                    const bookingData = {
                      name,
                      email,
                      checkInDate,
                      checkOutDate,
                      roomType,
                      numberOfAdults,
                      numberOfChildren,
                    };

                    try {
                      // Mengirim data pemesanan ke server
                      const response = await fetch("https://orchid-whale-hem.cyclic.app/api/bookings", {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify(bookingData),
                      });

                      if (response.ok) {
                        // Pemesanan berhasil, lakukan sesuatu seperti menampilkan notifikasi atau memberikan umpan balik positif kepada pengguna
                        console.log("Booking successful!");
                      } else {
                        // Pemesanan gagal, lakukan sesuatu seperti menampilkan pesan kesalahan atau memberikan umpan balik negatif kepada pengguna
                        console.error("Booking failed. Status:", response.status);
                      }
                    } catch (error) {
                      // Tangani kesalahan selama pengiriman permintaan
                      console.error("Error during booking:", error);
                    }
                  }

                  // Panggil fungsi bookHotel() saat tombol "Book Now" atau formulir pemesanan disubmit
                  // Misalnya, tambahkan event listener pada tombol atau formulir:
                  // const bookNowButton = document.getElementById("book-now-button");
                  // bookNowButton.addEventListener("click", bookHotel);

            
            </script>
  </body>
  </html>